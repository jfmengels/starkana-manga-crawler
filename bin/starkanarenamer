#!/usr/bin/env node

'use strict';

var fs = require("fs");
var extend = require("extend");

var renamer = require("../renamer");

var configFile = "./config.json",
    config = {},
    defaultConfig = {
        onlyNodeDirs: true
    };

function gracefulEnd(message) {
    if (message) {
        console.error(message);
    }
    process.exit(0);
}

try {
    var configData = fs.readFileSync(configFile);
    config = JSON.parse(configData);
} catch (e) {}

extend(config, defaultConfig);

var folders = process.argv.slice(2, process.argv.length);
if (folders.length === 0) {
    return gracefulEnd("Did not specify a directory.");
}
renamer.renameFolders(folders, config, gracefulEnd);